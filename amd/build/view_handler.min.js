define(["jquery","core/ajax"],(function(o,e){"use strict";return{init:function(e){var t=null,r=!1,n=e.formUrl;function i(){if(!r){r=!0;var o=new FormData(document.getElementById("learningStyleForm"));o.set("action","autosave"),fetch(n,{method:"POST",body:o}).then((function(o){return o.json()})).then((function(o){r=!1})).catch((function(o){r=!1}))}}o(".select-q").on("change",(function(){var e=o(this).closest(".learning_style_item");e.hasClass("question-error-highlight")&&(e.css({border:"","background-color":"","border-radius":"",padding:"","margin-bottom":"","box-shadow":""}),e.removeClass("question-error-highlight")),t&&clearTimeout(t),t=setTimeout(i,400)})),o("#learningStyleForm").on("submit",(function(e){var t=e.originalEvent.submitter,r=t?t.value:"next";if("previous"===r)return!0;if("next"!==r&&"finish"!==r)return!0;var n=o(".select-q"),i=!0,s=null;return n.each((function(){if(""===o(this).val()){i=!1;var e=o(this).closest(".learning_style_item");e.length&&(e.css({border:"3px solid #d32f2f","background-color":"#ffebee","border-radius":"10px",padding:"24px 28px","margin-bottom":"1.5rem","box-shadow":"0 4px 8px rgba(211, 47, 47, 0.3)"}),e.addClass("question-error-highlight"),s||(s=e))}})),i?void 0:(e.preventDefault(),s&&s[0].scrollIntoView({behavior:"smooth",block:"center"}),!1)})),e.shouldAutoScroll&&setTimeout((function(){var e=!1;o(".select-q").each((function(){if(!e&&""===o(this).val()){var t=o(this).closest(".learning_style_item");t.length&&(t.css({border:"3px solid #28a745","background-color":"#d4edda","border-radius":"10px",padding:"24px 28px","margin-bottom":"1.5rem","box-shadow":"0 4px 8px rgba(40, 167, 69, 0.3)",transition:"all 0.3s ease"}),t[0].scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((function(){t.css({border:"","background-color":"","border-radius":"",padding:"","margin-bottom":"","box-shadow":""})}),5e3)),e=!0}}))}),300),e.scrollToFinish&&setTimeout((function(){var e=o("#submitBtn");e.length&&(e[0].scrollIntoView({behavior:"smooth",block:"center"}),e.css({"box-shadow":"0 0 20px rgba(40, 167, 69, 0.8)",transition:"all 0.3s ease"}),setTimeout((function(){e.css("box-shadow","")}),5e3))}),300)}}}));
